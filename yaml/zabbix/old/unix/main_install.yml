---
- hosts: aix
  gather_facts: no
  vars:
    user: anagent

  tasks:
  - name: set mkdir
    include_tasks: set_mkdir_zabbix.yml
    vars:
      user_name: "{{ user }}"

  - name: upload zabiix install file
    include_tasks: set_upload_zabiix_file.yml
    vars:
      src: "~/ansible/file/"
      dest: "/zabbix"

  - name: install zabbix
    include_tasks: set_install_zabbix.yml 

  - name: set zabbix conf
    #include_tasks: set_zabbix_conf.yml
    include_tasks: set_chk_zabbix_conf.yml
    vars:
      #ip: 192.168.1.10
      #log_path: /zabbix/log/zabbix_agentd.log
      ip: 127.0.0.1
      log_path: /tmp/zabbix_agentd.log

  - name: start zabbix
    include_tasks: set_start_zabbix.yml
    

